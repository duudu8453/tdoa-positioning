# 时差定位原理演示系统

## 项目简介

本项目是一个交互式的时差定位（TDOA - Time Difference of Arrival）原理演示系统，旨在帮助学生理解和学习时差定位的基本原理、数学模型和实际应用中的各种影响因素。

## 功能特点

### 🎯 核心功能
- **可视化演示**: 实时显示接收站、目标位置和双曲线
- **参数可调**: 支持自定义接收站坐标、信号参数和误差设置
- **动画演示**: 信号传播过程的动态可视化
- **误差分析**: 考虑时间测量误差、位置误差、大气延迟等实际因素
- **算法测试**: 内置蒙特卡洛仿真和性能测试

### 📊 技术特性
- **统一坐标系**: 支持笛卡尔坐标系和地理坐标系
- **双曲线显示**: 实时计算和绘制TDOA双曲线
- **几何精度因子**: GDOP计算和分析
- **多种误差模型**: 时间误差、位置误差、大气延迟、多径效应

## 文件结构

```
时差定位2/
├── time_difference_positioning.html    # 主演示程序
├── test_tdoa_algorithm.js              # 算法测试代码
└── README.md                           # 项目说明文档
```

## 使用方法

### 1. 启动演示系统

直接在浏览器中打开 `time_difference_positioning.html` 文件即可开始使用。

### 2. 界面操作

#### 左侧控制面板
- **坐标系设置**: 选择坐标系类型和比例尺
- **接收站设置**: 调整三个接收站的位置坐标
- **信号参数**: 设置信号传播速度和目标位置
- **误差设置**: 配置各种系统误差参数
- **显示选项**: 控制双曲线、误差范围等的显示
- **操作按钮**: 计算位置、动画控制、系统重置等

#### 右侧画布区域
- **点击设置目标**: 在画布上点击可直接设置目标位置
- **实时显示**: 接收站、目标、双曲线的实时可视化
- **信息面板**: 显示时差定位的基本原理说明

### 3. 测试功能

点击"运行测试"按钮可执行以下测试：
- 理想条件下的定位精度测试
- 有误差条件下的定位性能分析
- 几何精度因子(GDOP)计算
- 不同参数对定位精度的影响分析

## 时差定位原理

### 基本概念

时差定位是一种基于信号到达时间差的无源定位技术。其基本原理是：

1. **时间差测量**: 测量信号到达不同接收站的时间差
2. **距离差计算**: 时间差乘以信号传播速度得到距离差
3. **双曲线方程**: 距离差恒定的点构成以两个接收站为焦点的双曲线
4. **交点求解**: 多条双曲线的交点即为目标位置

### 数学模型

#### 基本方程

对于接收站 $S_i(x_i, y_i)$ 和目标 $T(x, y)$，距离为：

$$r_i = \sqrt{(x-x_i)^2 + (y-y_i)^2}$$

时间差方程：
$$\Delta t_{ij} = \frac{r_i - r_j}{c}$$

其中 $c$ 为信号传播速度。

#### 双曲线方程

距离差 $\Delta r_{ij} = r_i - r_j = c \cdot \Delta t_{ij}$ 对应的双曲线方程为：

$$\sqrt{(x-x_i)^2 + (y-y_i)^2} - \sqrt{(x-x_j)^2 + (y-y_j)^2} = \Delta r_{ij}$$

#### 线性化求解

通过泰勒展开线性化，构建线性方程组：

$$\mathbf{A} \mathbf{x} = \mathbf{b}$$

其中 $\mathbf{x} = [x, y]^T$ 为待求目标位置。

使用最小二乘法求解：
$$\mathbf{x} = (\mathbf{A}^T\mathbf{A})^{-1}\mathbf{A}^T\mathbf{b}$$